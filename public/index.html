<!DOCTYPE html>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<!-- <meta name="google-signin-client_id" content="782779117566-trv3mp9i2df9erkdm3rdpq6fdqkhikb2.apps.googleusercontent.com"> -->
<meta name="google-signin-client_id" content="964309494813-oq8rogqpnjvbectejai7rd8hm5kgjfr5.apps.googleusercontent.com">
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" ></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
<!-- <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script> -->
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
<html>
<!-- <div class="wrapper"> -->
<!-- <button id="fadeContent">fade</button> -->
<!-- <div id="toFadeIn"> -->





<head>
	<title>Java Web Starter Application</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="styleLess.css" />
	<link href="mfb.css" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css">
</head>
<body onload="onLoad()">


<!-- <header class="main-header"> -->
  <!-- <h1>Your Logo Here</h1> -->
  <!-- <nav> -->
    <!-- <ul> -->
      <!-- <li>Your</li> -->
      <!-- <li>Nav</li> -->
      <!-- <li>Here</li> -->
      <!-- <md-button class="md-primary md-raised" md-theme="green" onclick="signOut()"><span>Sign Out</span> </md-button> -->
    <!-- </ul> -->
  <!-- <md-button class="md-primary md-raised" md-theme="green" onclick="signOut()"><span>Sign Out</span> </md-button> -->

  <!-- <div class="md-primary md-raised"> -->

			<!-- <md-button class="md-primary md-raised" onclick="signOut()"><span>Sign Out</span> </md-button> -->
<!-- </div> -->
  <!-- </nav> -->
<!-- </header> -->


<!-- <md-toolbar>
	<div class="md-toolbar-tools">
		<md-button class="md-primary md-raised" onclick="signOut()"><span>Sign Out</span> </md-button>
    <h2>
    	<span>Heading</span>
     </h2>
     	</div>

</md-toolbar>
 -->


	<!-- TODO -->



	<!-- <div class="wrapper"> -->
	<!-- <div class="container"> -->
	<!-- <table> -->
	<!-- <tr> -->
	<!-- <td style='width: 30%;'><img class = "newappIcon" src='images/newapp-icon.png'> -->
	<!-- </td> -->
	<!-- <td style='width: 30%; '><div class="g-signin2" data-onsuccess="onSignIn"></div></td> -->
	<!-- <td> -->
	<!-- The "Hello World!" message comes from /SimpleServlet -->
	<!-- <h1 id = "message"></h1> -->

	<!-- <p class='description'></p> Thanks for creating a <span class="blue">Liberty for Java Starter Application</span>. Get started by reading our <a -->
	<!-- href="https://www.ng.bluemix.net/docs/#starters/liberty/index.html#liberty">documentation</a> -->
	<!-- or use the Start Coding guide under your app in your dashboard. -->
	<!-- <button id="signOut" onclick="signOut()">Sign Out</button> -->
	<!-- </td> -->
	<!-- </tr> -->
	<!-- </table>		 -->
	<!-- <form class="form"> -->
	<!-- <input type="text" placeholder="Username"> -->
	<!-- <input type="password" placeholder="Password"> -->
	<!-- <button type="submit" id="login-button">Login</button> -->
	<!-- </form> -->
	<!-- </div> -->
	
<!-- 	<ul class="bg-bubbles">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul> -->
	<!-- </div> -->

	<div class="logoutWrapper" >
		<!-- setup toolbar for logoutWrapper -->
		<!-- <div layout="column" layout-fill> -->
			<!-- <md-toolbar> -->
		    <!-- <div class="md-toolbar-tools md-medium-tall"> -->
			<!-- <span><font size=5>Online ssh/sftp Server</font></span> -->
			<!-- <span flex></span> -->
			<!-- add integrated sign out button -->
			<!-- <md-button class="md-primary md-raised" md-theme="green" onclick="signOut()"><span>Sign Out</span> </md-button> -->
		<!-- </div>end md-toolbar-tools -->
			<!-- </md-toolbar> -->
		<!-- </div> -->





<md-toolbar>
  <div class="md-toolbar-tools">  
       	<h3>Online ssh/sftp Server</h3>
 	<span flex></span>
	<md-button class="md-primary md-raised" md-theme="green" onclick="signOut()"><span>Sign Out</span> </md-button>

	<!--     <md-button aria-label="Search" ng-click="showSearch = !showSearch">
      <ng-md-icon icon="search"></ng-md-icon>
    </md-button>
    <md-button aria-label="Open Settings" ng-click="showListBottomSheet($event)">
      <ng-md-icon icon="more_vert"></ng-md-icon>
    </md-button> -->
  </div>
 <!--  <md-tabs md-stretch-tabs class="md-primary" md-selected="data.selectedIndex">
    <md-tab id="tab1" aria-controls="tab1-content">
      Latest
    </md-tab>
    <md-tab id="tab2" aria-controls="tab2-content">
      Favorites
    </md-tab>
  </md-tabs> -->
</md-toolbar>






		<td>
			<!-- The "Hello World!" message comes from /SimpleServlet -->
			<h1 id = "message"></h1>
			<h2 id = "user"></h2>
			<!-- <p class='description'></p> Thanks for creating a <span class="blue">Liberty for Java Starter Application</span>. Get started by reading our <a -->
			<!-- href="https://www.ng.bluemix.net/docs/#starters/liberty/index.html#liberty">documentation</a> -->
			<!-- or use the Start Coding guide under your app in your dashboard. -->
			<!-- <button id="signOut" onclick="signOut()">Sign Out</button> -->
			<!-- <button class="btn" onclick="signOut()" type="button"><span>Sign Out</span></button> -->


			<!-- <textarea id="textareaEdit" ng-model="textareaValue"></textarea> -->
			<div ng-app="myApp">
				<div ng-controller="AppCtrl" align="center">
				<textarea id="TextArea" ng-model="loremIpsum" ng-keyup="autoExpand($event)" ></textarea>
				</div>
			</div>

			<!-- <ul class="mfb-component--br mfb-slidein" data-mfb-toggle="hover">
				<li class="mfb-component__wrap">
					<a href="#" data-mfb-label="A label" class="mfb-component__button--main">
						<ul class="mfb-component__list">
							<li>
								<a href="#" data-mfb-label="Add" data-mfb-label="label with long long title" class="mfb-component__button--child">
									<i class="mfb-component__child-icon ion-paper-airplane"></i>
								</a>
							</li>
						</ul>
					</li>
				</ul> -->






			</td>
		</div>
	
		<!-- setup top tool bar with the Website name -->
		<!-- <div layout="column" layout-fill> -->
				<!-- <md-toolbar> -->
		      		<!-- <div class="md-toolbar-tools md-medium-tall"> -->
				<!-- <span><font size = 5>Online ssh/sftp Server</font></span> -->
				<!-- <span flex></span> -->
				<!-- <md-button> </md-button> -->
				<!-- </div> end md-toolbar-tools -->
				<!-- </md-toolbar> -->
				<!-- <md-button class="md-primary md-raised" md-theme="green" onclick="signOut()"><span>Sign Out</span> </md-button> -->
				<!-- <md-content> Welcome! </md-content> -->
		<!-- </div> -->

		<md-toolbar>
  			<div class="md-toolbar-tools">  
       			<h3>Online ssh/sftp Server</h3>
 			<span flex></span>
			<h6>Welcome!</h6>
			</div>
			<md-toolbar>


		<div class="loginWrapper">
					<form class="form">	
				<input type="text" placeholder="host" id="host"><br>
				<input type="text" placeholder="port" id="port"><br>
				<div class="g-signin2" id="signIn" data-onsuccess="onSignIn"></div><br>
			</form>
			<!-- <table> -->
			<!-- <tr> -->
			<!-- <td style='width: 30%;'><img class = "newappIcon" src='images/newapp-icon.png'> -->
			<!-- </td> -->
			<!-- </tr> -->
			<!-- </table> -->
			
		</div>

		

	<!-- <ul class="bg-bubbles">
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul> -->

<!-- Call SimpleServlet to get the "Hello World" message  -->
<script type="text/javascript" src="index.js"></script>

<script type="text/javascript">
	var auth2 = {};





	function onSignIn(googleUser) {
		refreshValues();
		var profile = googleUser.getBasicProfile();
	  		console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
	  		console.log('Name: ' + profile.getName());
	  		console.log('Image URL: ' + profile.getImageUrl());
	  		console.log('Email: ' + profile.getEmail());
	  		var host = document.getElementById( 'host' ).value;
	  		var port = document.getElementById( 'port' ).value;
	  		console.log( 'host: ' + host );
	  		console.log( 'port: ' + port );

        // $(document).ready(function(){
        // $("button").click(function(){
        $.post("cs252-lab6-node.mybluemix.net",
        {
          name: "Donald Duck",
          city: "Duckburg"
        },
        function(data,status){
            alert("Data: " + data + "\nStatus: " + status);
        });
        console.log("post finished");
    // });
// });

	  // 		// sendRequestToServer
	  // 		xhrPut("SimpleServlet", function(responseText){
			// var mytitle = document.getElementById('message');
			// 	mytitle.innerHTML = responseText;
			// }, function(err){
			// console.log(err);
			// });

			// xhrPut( host );
			console.log('past xhrPut');





			document.getElementById( 'user' ).innerHTML =  'Hello, ' + profile.getName();
		}
		function signOut() {
			refreshValues();
			var auth2 = gapi.auth2.getAuthInstance();
			auth2.signOut().then(function () {
	    		// $( '.g-signin2' ).fadeIn(500);
	    		// $( '.logoutWrapper' ).fadeOut(500);
	    		console.log('User signed out.');
	    	});
		}


		/* called when web app begins */
		function onLoad() {
			console.log( 'onLoad' );
			appStart();
		}


var googleUser; // The current user.

/**
 * Calls startAuth after Sign in V2 finishes setting up.
 */
 var appStart = function() {
 	console.log( 'appStart' );
 	$( '.logoutWrapper' ).fadeOut(0);
 	gapi.load('auth2', initSigninV2);
 };

/**
 * Initializes Signin v2 and sets up listeners.
 */
 var initSigninV2 = function() {
 	console.log( 'initSigninV2' );
	// auth2 = gapi.auth2.init({
    // client_id: 'CLIENT_ID.apps.googleusercontent.com',
    // scope: 'profile'
// });
auth2 = gapi.auth2.getAuthInstance();

  // Listen for sign-in state changes.
  auth2.isSignedIn.listen(signinChanged);

  // Listen for changes to current user.
  auth2.currentUser.listen(userChanged);

  // Sign in the user if they are currently signed in.
  if (auth2.isSignedIn.get() == true) {
  	auth2.signIn();
  } 
  // Start with the current live values.
  refreshValues();
};

/**
 * Listener method for sign-out live value.
 *
 * @param {boolean} val the updated signed out state.
 */
 var signinChanged = function (val) {
 	console.log('Signin state changed to ', val);
 	refreshValues();
  // document.getElementById('signed-in-cell').innerText = val;
};

/**
 * Listener method for when the user changes.
 *
 * @param {GoogleUser} user the updated user.
 */
 var userChanged = function (user) {
 	console.log('User now: ', user);
 	googleUser = user;
 	updateGoogleUser();
  // document.getElementById('curr-user-cell').innerText =
    // JSON.stringify(user, undefined, 2);
};

/**
 * Updates the properties in the Google User table using the current user.
 */
 var updateGoogleUser = function () {
 	if (googleUser) {
    // document.getElementById('user-id').innerText = googleUser.getId();
    // document.getElementById('user-scopes').innerText =
      // googleUser.getGrantedScopes();
    // document.getElementById('auth-response').innerText =
      // JSON.stringify(googleUser.getAuthResponse(), undefined, 2);
  } else {
    // document.getElementById('user-id').innerText = '--';
    // document.getElementById('user-scopes').innerText = '--';
    // document.getElementById('auth-response').innerText = '--';
}
};

/**
 * Retrieves the current user and signed in states from the GoogleAuth
 * object.
 */
 var refreshValues = function() {
 	if (auth2){
 		console.log('Refreshing values...');

 		googleUser = auth2.currentUser.get();

    // document.getElementById('curr-user-cell').innerText =
      // JSON.stringify(googleUser, undefined, 2);
    // document.getElementById('signed-in-cell').innerText =
      // auth2.isSignedIn.get();

      if (auth2.isSignedIn.get() == true) {
      	$('.loginWrapper').fadeOut(500);
      	$('.logoutWrapper').fadeIn(500);
      } else {
      	// document.getElementsByClassName( 'logoutWrapper' )[0].style.visibility="visible";
      	$( '.logoutWrapper' ).fadeOut(0);
      	$( '.loginWrapper' ).fadeIn(500);
      }


      updateGoogleUser();
  }
}




/* TODO adjusting box */

var app = angular.module('myApp', ['ngMaterial']);

app.controller('AppCtrl', ['$scope', '$http', '$timeout', function($scope, $http, $timeout) {

  // Load the data
  // $http.get('http://www.corsproxy.com/loripsum.net/api/plaintext').then(function(res) {
  //   $scope.loremIpsum = res.data;
  //   $timeout(expand, 0);
  // });

  $scope.autoExpand = function(e) {
    var element = typeof e === 'object' ? e.target : document.getElementById(e);
    var scrollHeight = element.scrollHeight - 60; // replace 60 by the sum of padding-top and padding-bottom
    element.style.height = scrollHeight + "px";
  };

  $scope.toggleSidenav = function(menuId) {
    $mdSidenav(menuId).toggle();
  };


  /* md-toolbar */
  app.config(function($mdThemingProvider) {
  var customBlueMap = 		$mdThemingProvider.extendPalette('light-blue', {
    'contrastDefaultColor': 'light',
    'contrastDarkColors': ['50'],
    '50': 'ffffff'
  });
  $mdThemingProvider.definePalette('customBlue', customBlueMap);
  $mdThemingProvider.theme('default')
    .primaryPalette('customBlue', {
      'default': '500',
      'hue-1': '50'
    })
    .accentPalette('pink');
  $mdThemingProvider.theme('input', 'default')
        .primaryPalette('grey')
  });
  /* md-toolbar */



  function expand() {
    $scope.autoExpand('TextArea');
  }
}]);




/* TODO header */

/*
 * HeadsUp 1.5.6
 * @author Kyle Foster (@hkfoster)
 * @license MIT
 */
;
(function(window, document, undefined) {

  'use strict';

  // Extend function
  function extend(a, b) {
    for (var key in b) {
      if (b.hasOwnProperty(key)) {
        a[key] = b[key];
      }
    }
    return a;
  }

  // Throttle function (http://bit.ly/1eJxOqL)
  function throttle(fn, threshhold, scope) {
    threshhold || (threshhold = 250);
    var previous, deferTimer;
    return function() {
      var context = scope || this,
        current = Date.now(),
        args = arguments;
      if (previous && current < previous + threshhold) {
        clearTimeout(deferTimer);
        deferTimer = setTimeout(function() {
          previous = current;
          fn.apply(context, args);
        }, threshhold);
      } else {
        previous = current;
        fn.apply(context, args);
      }
    };
  }

  // Class management functions
  function classReg(className) {
    return new RegExp('(^|\\s+)' + className + '(\\s+|$)');
  }

  function hasClass(el, cl) {
    return classReg(cl).test(el.className);
  }

  function addClass(el, cl) {
    if (!hasClass(el, cl)) {
      el.className = el.className + ' ' + cl;
    }
  }

  function removeClass(el, cl) {
    el.className = el.className.replace(classReg(cl), ' ');
  }

  // Main function definition
  function headsUp(selector, options) {
    this.selector = document.querySelector(selector);
    this.options = extend(this.defaults, options);
    this.init();
  }

  // Overridable defaults
  headsUp.prototype = {
    defaults: {
      delay: 300,
      sensitivity: 20
    },

    // Init function
    init: function(selector) {

      var self = this,
        options = self.options,
        selector = self.selector,
        oldScrollY = 0,
        winHeight;

      // Resize handler function
      function resizeHandler() {
        winHeight = window.innerHeight;
        return winHeight;
      }

      // Scroll handler function
      function scrollHandler() {

        // Scoped variables
        var newScrollY = window.pageYOffset,
          docHeight = document.body.scrollHeight,
          pastDelay = newScrollY > options.delay,
          goingDown = newScrollY > oldScrollY,
          fastEnough = newScrollY < oldScrollY - options.sensitivity,
          rockBottom = newScrollY < 0 || newScrollY + winHeight >= docHeight;

        // Where the magic happens
        if (pastDelay && goingDown) {
          addClass(selector, 'heads-up');
        } else if (!goingDown && fastEnough && !rockBottom || !pastDelay) {
          removeClass(selector, 'heads-up');
        }

        // Keep on keeping on
        oldScrollY = newScrollY;
      }

      // Attach listeners
      if (selector) {

        // Trigger initial resize
        resizeHandler();

        // Resize function listener
        window.addEventListener('resize', throttle(resizeHandler), false);

        // Scroll function listener
        window.addEventListener('scroll', throttle(scrollHandler, 100), false);
      }
    }
  };

  window.headsUp = headsUp;

})(window, document);

// Instantiate HeadsUp
new headsUp('.main-header');




</script>
<script src="https://apis.google.com/js/client:platform.js?onload=startApp"></script>
<!-- </div> -->
</body>
<!-- </div> -->
</html>
